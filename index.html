<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AzerothCore Download</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>

  <style>
    /* 卡片hover上浮效果 */
    .hover-lift {
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .hover-lift:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }
    /* 弹窗过渡动画 */
    .fade-in {
      animation: fadeIn 0.3s ease-in-out;
    }
    .scale-in {
      animation: scaleIn 0.3s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes scaleIn {
      from { transform: scale(0.95); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .backdrop-blur {
        backdrop-filter: blur(8px);
      }
    }

    /* 基础样式 */
    body {
      @apply bg-gray-50 font-sans text-gray-800;
    }

    /* 导航栏样式 */
    #navbar {
      @apply sticky top-0 z-50 bg-white shadow-md transition-all duration-300;
    }

    /* 移动端菜单样式 */
    #mobile-menu {
      @apply md:hidden hidden;
    }

    /* Banner区域样式（渐变纯色背景） */
    .wotlk-banner-bg {
      background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
      color: white;
      padding: 4rem 0;
      width: 100%;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    /* 下载区域样式 */
    #downloads {
      @apply py-16 bg-gray-50;
    }

    /* 统计图表区域 */
    #stats {
      @apply py-12 bg-white;
    }

    /* 地图下载模态框样式 */
    #map-modal {
      @apply fixed inset-0 z-50 flex items-center justify-center hidden;
    }

    /* 模态框内容样式 */
    #map-modal .relative {
      @apply bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto scale-in mx-4;
    }

    /* 图表区域样式 */
    #downloadsChart {
      @apply h-64;
    }

    /* 仓库统计样式 */
    .repo-stats {
      @apply py-16 bg-gradient-to-r from-blue-50 to-indigo-50;
    }
    
    .stat-card {
      @apply bg-white rounded-2xl shadow-md p-8 text-center hover-lift border border-gray-100;
    }

    /* 统计数据加载动画 */
    .stat-number {
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .stat-number.loaded {
      opacity: 1;
      transform: translateY(0);
    }

    /* FAQ 区域样式 */
    .faq-toggle {
      @apply w-full text-left px-6 py-4 flex justify-between items-center focus:outline-none;
    }

    .faq-content {
      @apply px-6 pb-4 hidden;
    }

    /* 页脚样式 */
    footer {
      @apply bg-gray-900 text-white py-10;
    }

    footer .border-t {
      @apply border-gray-700 mt-12 pt-8 text-center text-gray-500;
    }

    /* 新增：模态框标题背景 */
    .gradient-bg {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
    }

    /* 下载计数动画 */
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    .download-count {
      transition: all 0.3s ease;
    }
    .download-count.pulse {
      animation: pulse 0.5s ease;
      color: #2563eb;
      font-weight: bold;
    }
    
    .build-status {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: #374151;
    }

    .build-icon {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }

    .build-success {
      background-color: #10b981; /* 绿色 - 成功 */
    }

    .build-failure {
      background-color: #ef4444; /* 红色 - 失败 */
    }

    .build-running {
      background-color: #f59e0b; /* 橙色 - 运行中 */
      animation: spin 1.5s linear infinite;
    }

    .build-pending {
      background-color: #6b7280; /* 灰色 - 等待中 */
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  
  <!-- Tailwind Configuration -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#2563eb',
            secondary: '#1e40af',
            dark: '#1e293b',
            light: '#f8fafc',
            accent: '#3b82f6',
            alternative: '#10b981' // 备用加速按钮颜色
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            mono: ['Fira Code', 'monospace']
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gray-50 font-sans text-gray-800">
  <!-- Navigation Bar -->
  <header class="sticky top-0 z-50 bg-white shadow-md transition-all duration-300" id="navbar">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center py-4">
        <div class="flex items-center space-x-2">
          <i class="fa fa-github text-2xl text-gray-800"></i>
          <span class="text-xl font-bold text-primary">AzerothCore</span>
        </div>
        
        <!-- 装饰元素 -->
        <div class="absolute top-20 left-10 md:left-20 w-32 h-32 md:w-48 md:h-48 rounded-full bg-white/10 blur-2xl"></div>
        <div class="absolute bottom-20 right-10 md:right-20 w-24 h-24 md:w-36 md:h-36 rounded-full bg-white/10 blur-2xl"></div>
        
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
          <div class="max-w-3xl mx-auto text-center">
            <h1 class="text-3xl md:text-4xl lg:text-5xl font-bold mb-4" data-i18n="bannerTitle"></h1>
            <p class="text-lg md:text-xl text-white/90 mb-8 max-w-2xl mx-auto" data-i18n="bannerDesc"></p>
            <a href="#downloads" class="inline-flex items-center px-8 py-3.5 bg-white text-primary rounded-lg font-semibold hover:bg-gray-100 transition-all shadow-lg hover:shadow-xl">
              <span data-i18n="getStarted"></span>
              <i class="fa fa-arrow-down ml-2"></i>
            </a>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- 仓库统计区域（优化版） -->
  <section class="repo-stats py-16 bg-gradient-to-r from-blue-50 to-indigo-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold text-gray-800 mb-4" data-i18n="repoStats"></h2>
        <p class="text-gray-600 max-w-2xl mx-auto text-lg" data-i18n="repoStatsDesc"></p>
      </div>
      
      <!-- 统计卡片容器：使用grid确保对齐，增加间距提升呼吸感 -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 max-w-5xl mx-auto">
        <!-- Stars 统计卡片（优化样式+对齐） -->
        <div class="stat-card flex flex-col items-center justify-between">
          <div class="text-center mb-6">
            <div class="flex items-center justify-center h-20 w-20 rounded-full bg-yellow-100 text-yellow-500 mb-4 mx-auto">
              <i class="fa fa-star text-3xl"></i>
            </div>
            <h3 class="text-lg font-semibold text-gray-700" data-i18n="stars"></h3>
          </div>
          <p class="text-4xl font-bold text-gray-800 stat-number" id="stars-count">
            <i class="fa fa-spinner fa-spin text-gray-400"></i>
          </p>
        </div>
        
        <!-- Forks 统计卡片 -->
        <div class="stat-card flex flex-col items-center justify-between">
          <div class="text-center mb-6">
            <div class="flex items-center justify-center h-20 w-20 rounded-full bg-green-100 text-green-500 mb-4 mx-auto">
              <i class="fa fa-code-fork text-3xl"></i>
            </div>
            <h3 class="text-lg font-semibold text-gray-700" data-i18n="forks"></h3>
          </div>
          <p class="text-4xl font-bold text-gray-800 stat-number" id="forks-count">
            <i class="fa fa-spinner fa-spin text-gray-400"></i>
          </p>
        </div>
        
        <!-- Issues 统计卡片 -->
        <div class="stat-card flex flex-col items-center justify-between">
          <a href="#" class="inline-flex items-center px-6 py-3 bg-primary text-white rounded-lg font-medium hover:bg-secondary transition-all shadow-md hover:shadow-lg">
            <i class="fa fa-github mr-2 text-xl"></i>
            <span data-i18n="viewOnGithub"></span>
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Download Section (4 Columns) -->
  <section id="downloads" class="py-16 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold mb-4" data-i18n="downloads"></h2>
      </div>
      
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
  
        <!-- Windows Download -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden hover-lift">
          <div class="p-6">
            <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-primary mb-4 mx-auto">
              <i class="fa fa-windows text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-center mb-2">Windows</h3>
            <p class="text-gray-600 text-center mb-6">x64</p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/acore/releases/download/Playerbots_Win_X64/playerbots_Win_x64.zip" target="_blank" 
               class="download-btn block w-full py-3 px-4 bg-primary text-white rounded-lg text-center font-medium hover:bg-secondary transition-colors mb-3"
               data-type="windows">
              <i class="fa fa-download mr-2"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/acore/releases/download/Playerbots_Win_X64/playerbots_Win_x64.zip" target="_blank"
               class="download-btn block w-full py-3 px-4 bg-alternative text-white rounded-lg text-center font-medium hover:bg-green-600 transition-colors"
               data-type="windows">
              <i class="fa fa-download mr-2"></i> 
              <span data-i18n="alternative"></span>
            </a>
            <div class="mt-4 text-center text-sm text-gray-500">
              <span class="mr-4">
                <i class="fa fa-clock-o text-blue-500 mr-1"></i> 
                <span data-i18n="dailyBuild"></span>
              </span>
              <span>
                <i class="fa fa-download text-green-500 mr-1"></i> 
                <span class="download-count" data-type="windows">1233</span>
              </span>
            </div>
            <div class="flex items-center justify-center mt-4">
           <div class="build-status" data-repo="game760/acore" data-workflow="Win_X64.yml"></div>
           </div>
          </div>
        </div>
        
        <!-- Linux Download -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden hover-lift">
          <div class="p-6">
            <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-primary mb-4 mx-auto">
              <i class="fa fa-linux text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-center mb-2">Linux</h3>
            <p class="text-gray-600 text-center mb-6">x64</p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/acore/releases/download/Playerbots_Linux_x64/Playerbots_linux_x64.tar.gz" target="_blank"
               class="download-btn block w-full py-3 px-4 bg-primary text-white rounded-lg text-center font-medium hover:bg-secondary transition-colors mb-3"
               data-type="linux">
              <i class="fa fa-download mr-2"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/acore/releases/download/Playerbots_Linux_x64/Playerbots_linux_x64.tar.gz" target="_blank"
               class="download-btn block w-full py-3 px-4 bg-alternative text-white rounded-lg text-center font-medium hover:bg-green-600 transition-colors"
               data-type="linux">
              <i class="fa fa-download mr-2"></i> 
              <span data-i18n="alternative"></span>
            </a>
            <div class="mt-4 text-center text-sm text-gray-500">
              <span class="mr-4">
                <i class="fa fa-clock-o text-blue-500 mr-1"></i> 
                <span data-i18n="dailyBuild"></span>
              </span>
              <span>
                <i class="fa fa-download text-green-500 mr-1"></i> 
                <span class="download-count" data-type="linux">857</span>
              </span>
            </div>
            <div class="flex items-center justify-center mt-4">
               <div class="build-status" data-repo="game760/acore" data-workflow="Linux_x64.yml"></div>
            </div>
          </div>
        </div>

        <!-- Map Download -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden hover-lift">
          <div class="p-6">
            <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-primary mb-4 mx-auto">
              <i class="fa fa-map text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-center mb-2" data-i18n="mapResources"></h3>
            <p class="text-gray-600 text-center mb-6" data-i18n="general"></p>
            <!-- 全球加速按钮 -->
            <button id="map-download-btn" class="download-btn block w-full py-3 px-4 bg-primary text-white rounded-lg text-center font-medium hover:bg-secondary transition-colors mb-3"
                    data-type="maps">
              <i class="fa fa-download mr-2"></i> 
              <span data-i18n="global"></span>
            </button>
            <!-- 备用加速按钮 -->
            <button id="map-download-alt-btn" class="download-btn block w-full py-3 px-4 bg-alternative text-white rounded-lg text-center font-medium hover:bg-green-600 transition-colors"
                    data-type="maps">
              <i class="fa fa-download mr-2"></i> 
              <span data-i18n="alternative"></span>
            </button>
            <div class="mt-4 text-center text-sm text-gray-500">
              <span class="mr-4">
                <i class="fa fa-check-circle text-green-500 mr-1"></i> 
                <span data-i18n="required"></span>
              </span>
              <span>
                <i class="fa fa-download text-green-500 mr-1"></i> 
                <span class="download-count" data-type="maps">1026</span>
              </span>
            </div>
            <div class="flex items-center justify-center mt-4">
                <div class="build-status" data-repo="game760/mapdata" data-workflow="MapData.yml"></div>
            </div>
          </div>
        </div>
    
        <!-- Database Download -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden hover-lift">
          <div class="p-6">
            <div class="flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 text-primary mb-4 mx-auto">
              <i class="fa fa-database text-2xl"></i>
            </div>
            <h3 class="text-xl font-semibold text-center mb-2" data-i18n="database"></h3>
            <p class="text-gray-600 text-center mb-6" data-i18n="mysql"></p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/ACore/releases/download/DataBase/DataBase.tar.gz" target="_blank"
               class="download-btn block w-full py-3 px-4 bg-primary text-white rounded-lg text-center font-medium hover:bg-secondary transition-colors mb-3"
               data-type="database">
              <i class="fa fa-download mr-2"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/ACore/releases/download/DataBase/DataBase.tar.gz" target="_blank"
               class="download-btn block w-full py-3 px-4 bg-alternative text-white rounded-lg text-center font-medium hover:bg-green-600 transition-colors"
               data-type="database">
              <i class="fa fa-download mr-2"></i> 
              <span data-i18n="alternative"></span>
            </a>
            <div class="mt-4 text-center text-sm text-gray-500">
              <span class="mr-4">
                <i class="fa fa-check-circle text-green-500 mr-1"></i> 
                <span data-i18n="required"></span>
              </span>
              <span>
                <i class="fa fa-download text-green-500 mr-1"></i> 
                <span class="download-count" data-type="database">1352</span>
              </span>
            </div>
            <div class="flex items-center justify-center mt-4">
            <div class="build-status" data-repo="game760/acore" data-workflow="Database.yml"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 新增的地区提示 -->
      <div class="mt-10 max-w-6xl mx-auto bg-blue-50 border border-blue-100 rounded-lg p-4 text-center">
        <p class="text-gray-700" data-i18n="regionTip"></p>
      </div>
    </div>
  </section>

  <!-- Download Statistics Section -->
  <section id="stats" class="py-12 bg-white">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-10">
        <h2 class="text-2xl md:text-3xl font-bold mb-2" data-i18n="downloadStats"></h2>
        <p class="text-gray-600" data-i18n="downloadStatsDesc"></p>
      </div>
      
      <div class="max-w-4xl mx-auto bg-white rounded-xl shadow-md p-6">
        <canvas id="downloadsChart"></canvas>
      </div>
    </div>
  </section>

  <!-- Map Download Modal -->
  <div id="map-modal" class="fixed inset-0 z-50 flex items-center justify-center hidden">
    <!-- Overlay -->
    <div class="absolute inset-0 bg-black bg-opacity-50 backdrop-blur fade-in"></div>
    
    <!-- Modal Content -->
    <div class="relative bg-white rounded-2xl shadow-2xl max-w-5xl w-full max-h-[90vh] overflow-y-auto scale-in mx-4">
      <!-- 模态框内语言切换按钮 -->
      <div class="absolute top-5 right-14 flex border rounded-md overflow-hidden z-10">
        <button id="modal-lang-en-btn" class="px-3 py-1 text-sm font-medium text-primary bg-white">EN</button>
        <button id="modal-lang-zh-btn" class="px-3 py-1 text-sm font-medium text-gray-600 bg-white">中文</button>
      </div>
      
      <!-- Close Button -->
      <button id="close-modal" class="absolute top-5 right-5 text-gray-500 hover:text-gray-700 transition-colors z-10" aria-label="Close modal">
        <i class="fa fa-times text-xl"></i>
      </button>
      
      <!-- Modal Header -->
      <div class="gradient-bg p-8 md:p-10">
        <h3 class="text-2xl md:text-3xl font-bold text-black" data-i18n="mapResources"></h3>
        <p class="text-blue-100 mt-2">
          <span class="text-black" data-i18n="mapResourcesDesc"></span>
        </p>
      </div>
      
      <!-- Modal Body -->
      <div class="p-8 md:p-10">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- DBC -->
          <div class="border border-gray-200 rounded-xl p-6 hover-lift">
            <div class="flex items-center justify-center h-14 w-14 rounded-full bg-blue-50 text-primary mb-5 mx-auto">
              <i class="fa fa-file-code-o text-2xl"></i>
            </div>
            <h4 class="text-lg font-semibold text-center mb-3">dbc</h4>
            <p class="text-gray-600 text-center text-sm mb-3">
              <span>Database client files containing game data</span>
              <span class="hidden">包含游戏数据的数据库客户端文件</span>
            </p>
            <p class="text-gray-500 text-center text-xs mb-3">
              <i class="fa fa-download text-green-500 mr-1"></i> 
              <span class="download-count" data-type="dbc">782</span>
            </p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/mapdata/releases/download/MapData/dbc.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-primary text-white rounded-lg text-center text-sm font-medium hover:bg-secondary transition-colors mb-2"
               data-type="dbc">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/mapdata/releases/download/MapData/dbc.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-alternative text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors"
               data-type="dbc">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="alternative"></span>
            </a>
          </div>
          
          <!-- VMAP -->
          <div class="border border-gray-200 rounded-xl p-6 hover-lift">
            <div class="flex items-center justify-center h-14 w-14 rounded-full bg-blue-50 text-primary mb-5 mx-auto">
              <i class="fa fa-cubes text-2xl"></i>
            </div>
            <h4 class="text-lg font-semibold text-center mb-3">vmap</h4>
            <p class="text-gray-600 text-center text-sm mb-3">
              <span>Visibility maps for line of sight calculations</span>
              <span class="hidden">用于视线计算的可见性地图</span>
            </p>
            <p class="text-gray-500 text-center text-xs mb-3">
              <i class="fa fa-download text-green-500 mr-1"></i> 
              <span class="download-count" data-type="vmap">643</span>
            </p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/mapdata/releases/download/MapData/vmaps.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-primary text-white rounded-lg text-center text-sm font-medium hover:bg-secondary transition-colors mb-2"
               data-type="vmap">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/mapdata/releases/download/MapData/vmaps.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-alternative text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors"
               data-type="vmap">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="alternative"></span>
            </a>
          </div>
          
          <!-- MMAPS -->
          <div class="border border-gray-200 rounded-xl p-6 hover-lift">
            <div class="flex items-center justify-center h-14 w-14 rounded-full bg-blue-50 text-primary mb-5 mx-auto">
              <i class="fa fa-road text-2xl"></i>
            </div>
            <h4 class="text-lg font-semibold text-center mb-3">mmaps</h4>
            <p class="text-gray-600 text-center text-sm mb-3">
              <span>Movement maps for creature navigation</span>
              <span class="hidden">用于生物导航的移动地图</span>
            </p>
            <p class="text-gray-500 text-center text-xs mb-3">
              <i class="fa fa-download text-green-500 mr-1"></i> 
              <span class="download-count" data-type="mmaps">598</span>
            </p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/mapdata/releases/download/MapData/mmaps.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-primary text-white rounded-lg text-center text-sm font-medium hover:bg-secondary transition-colors mb-2"
               data-type="mmaps">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/mapdata/releases/download/MapData/mmaps.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-alternative text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors"
               data-type="mmaps">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="alternative"></span>
            </a>
          </div>
          
          <!-- Cameras -->
          <div class="border border-gray-200 rounded-xl p-6 hover-lift">
            <div class="flex items-center justify-center h-14 w-14 rounded-full bg-blue-50 text-primary mb-5 mx-auto">
              <i class="fa fa-video-camera text-2xl"></i>
            </div>
            <h4 class="text-lg font-semibold text-center mb-3">Cameras</h4>
            <p class="text-gray-600 text-center text-sm mb-3">
              <span>Camera position data for in-game views</span>
              <span class="hidden">用于游戏内视图的相机位置数据</span>
            </p>
            <p class="text-gray-500 text-center text-xs mb-3">
              <i class="fa fa-download text-green-500 mr-1"></i> 
              <span class="download-count" data-type="cameras">421</span>
            </p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/mapdata/releases/download/MapData/Cameras.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-primary text-white rounded-lg text-center text-sm font-medium hover:bg-secondary transition-colors mb-2"
               data-type="cameras">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/mapdata/releases/download/MapData/Cameras.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-alternative text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors"
               data-type="cameras">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="alternative"></span>
            </a>
          </div>
          
          <!-- Maps -->
          <div class="border border-gray-200 rounded-xl p-6 hover-lift">
            <div class="flex items-center justify-center h-14 w-14 rounded-full bg-blue-50 text-primary mb-5 mx-auto">
              <i class="fa fa-map-o text-2xl"></i>
            </div>
            <h4 class="text-lg font-semibold text-center mb-3">Maps</h4>
            <p class="text-gray-600 text-center text-sm mb-3">
              <span>Base map files for world geometry</span>
              <span class="hidden">用于世界几何的基础地图文件</span>
            </p>
            <p class="text-gray-500 text-center text-xs mb-3">
              <i class="fa fa-download text-green-500 mr-1"></i> 
              <span class="download-count" data-type="maps-base">812</span>
            </p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/mapdata/releases/download/MapData/maps.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-primary text-white rounded-lg text-center text-sm font-medium hover:bg-secondary transition-colors mb-2"
               data-type="maps-base">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/mapdata/releases/download/MapData/maps.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-alternative text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors"
               data-type="maps-base">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="alternative"></span>
            </a>
          </div>

          <!-- Runlib -->
          <div class="border border-gray-200 rounded-xl p-6 hover-lift">
            <div class="flex items-center justify-center h-14 w-14 rounded-full bg-blue-50 text-primary mb-5 mx-auto">
              <i class="fa fa-compress text-2xl"></i>
            </div>
            <h4 class="text-lg font-semibold text-center mb-3" data-i18n="runtimeLibrary"></h4>
            <p class="text-gray-600 text-center text-sm mb-3" data-i18n="runtimeDesc"></p>
            <p class="text-gray-500 text-center text-xs mb-3">
              <i class="fa fa-download text-green-500 mr-1"></i> 
              <span class="download-count" data-type="runlib">926</span>
            </p>
            <!-- 全球加速按钮 -->
            <a href="https://github.com/game760/acore/releases/download/Runlib/Runlib.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-primary text-white rounded-lg text-center text-sm font-medium hover:bg-secondary transition-colors mb-2"
               data-type="runlib">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="global"></span>
            </a>
            <!-- 备用加速按钮 -->
            <a href="https://gh-proxy.com/https://github.com/game760/acore/releases/download/Runlib/Runlib.zip" target="_blank"
               class="download-btn block w-full py-2 px-3 bg-alternative text-white rounded-lg text-center text-sm font-medium hover:bg-green-600 transition-colors"
               data-type="runlib">
              <i class="fa fa-download mr-1"></i> 
              <span data-i18n="alternative"></span>
            </a>
          </div>
        </div>
        
        <!-- Installation Notes -->
        <div class="mt-10 bg-gray-50 rounded-xl p-6 border border-gray-200">
          <h4 class="font-semibold text-lg mb-3 flex items-center">
            <i class="fa fa-info-circle text-primary mr-2"></i>
            <span data-i18n="installationNotes"></span>
          </h4>
          <ul class="text-gray-600 space-y-2 text-sm">
            <li class="flex items-start">
              <i class="fa fa-check-circle text-green-500 mt-1 mr-2"></i>
              <span data-i18n="installStep1"></span>
            </li>
            <li class="flex items-start">
              <i class="fa fa-check-circle text-green-500 mt-1 mr-2"></i>
              <span data-i18n="installStep2"></span>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <!-- FAQ Section -->
  <section class="py-16 bg-gray-50">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-4xl">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-bold mb-4" data-i18n="faqTitle"></h2>
        <p class="text-gray-600" data-i18n="faqDesc"></p>
      </div>
      
      <div class="space-y-4">
        <!-- FAQ Item 1 -->
        <div class="bg-white rounded-xl shadow-sm overflow-hidden">
          <button class="faq-toggle font-medium text-gray-800 hover:text-primary" data-target="faq1">
            <span data-i18n="faq1Q"></span>
            <i class="fa fa-chevron-down transition-transform"></i>
          </button>
          <div id="faq1" class="faq-content">
            <p class="text-gray-600" data-i18n="faq1A"></p>
          </div>
        </div>
        
        <!-- More FAQ items would follow here -->
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer>
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
        <div>
          <h3 class="text-lg font-semibold mb-4">AzerothCore</h3>
          <p class="text-gray-400 mb-4" data-i18n="footerDesc"></p>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="fa fa-github text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="fa fa-discord text-xl"></i>
            </a>
            <a href="#" class="text-gray-400 hover:text-white transition-colors">
              <i class="fa fa-twitter text-xl"></i>
            </a>
          </div>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-4" data-i18n="resources"></h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors" data-i18n="documentation"></a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors" data-i18n="tutorials"></a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors" data-i18n="wiki"></a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors" data-i18n="community"></a></li>
          </ul>
        </div>
        
        <div>
          <h3 class="text-lg font-semibold mb-4" data-i18n="legal"></h3>
          <ul class="space-y-2">
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors" data-i18n="privacyPolicy"></a></li>
            <li><a href="#" class="text-gray-400 hover:text-white transition-colors" data-i18n="termsOfService"></a></li>
          </ul>
        </div>
      </div>
      
      <div class="border-t border-gray-700 pt-8">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <p class="text-gray-500 text-sm mb-4 md:mb-0" data-i18n="copyright"></p>
          <div class="flex space-x-6">
            <a href="#" class="text-gray-500 hover:text-gray-300 text-sm transition-colors" data-i18n="privacy"></a>
            <a href="#" class="text-gray-500 hover:text-gray-300 text-sm transition-colors" data-i18n="terms"></a>
            <a href="#" class="text-gray-500 hover:text-gray-300 text-sm transition-colors" data-i18n="cookies"></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

<script>
  // 存储翻译数据（这里假设translations已定义，实际使用时需要补充完整）
  const translations = {
    en: {
      bannerTitle: "AzerothCore Downloads",
      bannerDesc: "Get the latest files to set up your own AzerothCore server",
      getStarted: "Get Started",
      repoStats: "Repository Statistics",
      repoStatsDesc: "AzerothCore community growth metrics",
      stars: "Stars",
      forks: "Forks",
      viewOnGithub: "View on GitHub",
      downloads: "Downloads",
      global: "Global Accelerator",
      alternative: "Alternative Accelerator",
      dailyBuild: "Daily Build",
      required: "Required",
      mapResources: "Map Resources",
      general: "General",
      database: "Database",
      mysql: "MySQL database with game content",
      regionTip: "Note: Users in China may experience better speeds with the alternative accelerator",
      downloadStats: "Download Statistics",
      downloadStatsDesc: "Popularity of different download options",
      downloadLabel: "Downloads",
      downloadCount: "Number of Downloads",
      downloadTooltip: "%d downloads",
      runtimeLibrary: "Runtime Library",
      runtimeDesc: "Required libraries for running the server",
      installationNotes: "Installation Notes",
      installStep1: "Extract all map files to your server's 'data' directory",
      installStep2: "Configure your server to use the correct database credentials",
      faqTitle: "Frequently Asked Questions",
      faqDesc: "Answers to common questions about AzerothCore",
      faq1Q: "How do I install AzerothCore?",
      faq1A: "Please refer to the official documentation for detailed installation instructions.",
      footerDesc: "AzerothCore is an open-source MMORPG server emulator.",
      resources: "Resources",
      documentation: "Documentation",
      tutorials: "Tutorials",
      wiki: "Wiki",
      community: "Community",
      legal: "Legal",
      privacyPolicy: "Privacy Policy",
      termsOfService: "Terms of Service",
      copyright: "© 2023 AzerothCore. All rights reserved.",
      privacy: "Privacy",
      terms: "Terms",
      cookies: "Cookies",
      downloadTip: "Download started! Please wait for the file to finish downloading."
    },
    zh: {
      bannerTitle: "AzerothCore 下载",
      bannerDesc: "获取最新文件以搭建您自己的AzerothCore服务器",
      getStarted: "开始使用",
      repoStats: "仓库统计",
      repoStatsDesc: "AzerothCore社区增长指标",
      stars: "星标",
      forks: "分支",
      viewOnGithub: "在GitHub上查看",
      downloads: "下载",
      global: "全球加速",
      alternative: "备用加速",
      dailyBuild: "每日构建",
      required: "必需",
      mapResources: "地图资源",
      general: "通用",
      database: "数据库",
      mysql: "包含游戏内容的MySQL数据库",
      regionTip: "注意：中国用户使用备用加速可能会获得更好的速度",
      downloadStats: "下载统计",
      downloadStatsDesc: "不同下载选项的受欢迎程度",
      downloadLabel: "下载量",
      downloadCount: "下载次数",
      downloadTooltip: "%d 次下载",
      runtimeLibrary: "运行时库",
      runtimeDesc: "运行服务器所需的库",
      installationNotes: "安装说明",
      installStep1: "将所有地图文件解压到服务器的'data'目录",
      installStep2: "配置服务器以使用正确的数据库凭据",
      faqTitle: "常见问题",
      faqDesc: "关于AzerothCore的常见问题解答",
      faq1Q: "如何安装AzerothCore？",
      faq1A: "请参考官方文档获取详细的安装说明。",
      footerDesc: "AzerothCore是一个开源的MMORPG服务器模拟器。",
      resources: "资源",
      documentation: "文档",
      tutorials: "教程",
      wiki: "维基",
      community: "社区",
      legal: "法律",
      privacyPolicy: "隐私政策",
      termsOfService: "服务条款",
      copyright: "© 2023 AzerothCore。保留所有权利。",
      privacy: "隐私",
      terms: "条款",
      cookies: "Cookie",
      downloadTip: "下载已开始！请等待文件下载完成。"
    }
  };

  // 存储下载计数数据
  const downloadCounts = {
    windows: 1233,
    linux: 857,
    maps: 1026,
    database: 752,
    dbc: 782,
    vmap: 643,
    mmaps: 598,
    cameras: 421,
    "maps-base": 812,
    "runlib": 926
  };

  // 从环境变量获取GitHub Token（通过工作流注入）
  const githubToken = BUILD.GITHUB_TOKEN || null;

  // 下载提示函数
  function showDownloadNotice() {
    alert(translations[currentLang].downloadTip);
  }

  // 更新下载计数函数
  function updateDownloadCount(type) {
    // 增加计数
    downloadCounts[type]++;
    
    // 更新所有相同类型的计数器
    document.querySelectorAll(`.download-count[data-type="${type}"]`).forEach(element => {
      // 添加动画效果
      element.classList.add('pulse');
      
      // 更新数字
      element.textContent = downloadCounts[type];
      
      // 移除动画类以允许下次动画
      setTimeout(() => {
        element.classList.remove('pulse');
      }, 500);
    });
    
    // 更新图表
    updateDownloadChart();
  }

  // 更新下载图表
  function updateDownloadChart() {
    if (window.downloadsChart) {
      window.downloadsChart.data.datasets[0].data = [
        downloadCounts.windows,
        downloadCounts.linux,
        downloadCounts.maps,
        downloadCounts.database
      ];
      // 强制更新图表确保样式同步
      window.downloadsChart.update('none');
    }
  }

  // 更新图表语言
  function updateChartLanguage(lang) {
    if (window.downloadsChart) {
      window.downloadsChart.data.datasets[0].label = translations[lang].downloadLabel;
      window.downloadsChart.options.scales.y.title.text = translations[lang].downloadCount;
      window.downloadsChart.options.plugins.tooltip.callbacks.label = function(context) {
        const value = context.raw;
        return translations[lang].downloadTooltip.replace('%d', value);
      };
      window.downloadsChart.update();
    }
  }

  // 获取GitHub仓库统计信息（使用环境变量Token）
  async function fetchGitHubRepoStats() {
    try {
      const headers = {};
      if (githubToken) {
        headers['Authorization'] = `token ${githubToken}`;
      }

      const response = await fetch('https://api.github.com/repos/azerothcore/azerothcore-wotlk', { headers });
      if (!response.ok) throw new Error('Failed to fetch repo stats');
      
      const data = await response.json();
      
      // 更新星星计数并添加动画
      const starsElement = document.getElementById('stars-count');
      if (starsElement) {
        starsElement.textContent = data.stargazers_count.toLocaleString();
        starsElement.classList.add('loaded');
      }
      
      // 更新分支计数并添加动画
      const forksElement = document.getElementById('forks-count');
      if (forksElement) {
        forksElement.textContent = data.forks_count.toLocaleString();
        forksElement.classList.add('loaded');
      }
    } catch (error) {
      console.error('Error fetching GitHub stats:', error);
      // 失败时显示默认值
      document.getElementById('stars-count')?.classList.add('loaded');
      document.getElementById('forks-count')?.classList.add('loaded');
    }
  }

  // 获取GitHub Actions构建状态
  async function updateBuildStatus(container) {
    const repo = container.getAttribute('data-repo');
    const workflow = container.getAttribute('data-workflow');
    
    if (!repo || !workflow) return;
    
    try {
      const headers = {};
      if (githubToken) {
        headers['Authorization'] = `token ${githubToken}`;
      }
      
      const response = await fetch(
        `https://api.github.com/repos/${repo}/actions/workflows/${workflow}/runs?status=completed&per_page=1`,
        { headers }
      );
      
      if (!response.ok) throw new Error('Failed to fetch build status');
      
      const data = await response.json();
      if (!data.workflow_runs || data.workflow_runs.length === 0) {
        container.innerHTML = `
          <div class="build-icon build-pending">?</div>
          <span>${translations[currentLang].buildStatusUnknown}</span>
        `;
        return;
      }
      
      const run = data.workflow_runs[0];
      const status = run.conclusion || run.status;
      
      let iconClass, statusText;
      switch (status) {
        case 'success':
          iconClass = 'build-success';
          statusText = translations[currentLang].buildStatusSuccess;
          break;
        case 'failure':
          iconClass = 'build-failure';
          statusText = translations[currentLang].buildStatusFailed;
          break;
        case 'running':
          iconClass = 'build-running';
          statusText = translations[currentLang].buildStatusRunning;
          break;
        default:
          iconClass = 'build-pending';
          statusText = translations[currentLang].buildStatusPending;
      }
      
      container.innerHTML = `
        <div class="build-icon ${iconClass}">${status === 'running' ? '↺' : '✓'}</div>
        <span>${statusText}</span>
      `;
    } catch (error) {
      console.error('Failed to Get Build Status:', error);
      // 失败时显示默认成功状态
      container.innerHTML = `
        <div class="build-icon build-success">✓</div>
        <span>${translations[currentLang].buildStatusNormal}</span>
      `;
    }
  }

  // 初始化所有构建状态显示
  function initBuildStatusDisplays() {
    const containers = document.querySelectorAll('.build-status');
    
    // 初始加载状态
    containers.forEach(container => {
      updateBuildStatus(container);
    });
    
    // 每30秒自动更新一次状态
    setInterval(() => {
      containers.forEach(container => {
        updateBuildStatus(container);
      });
    }, 30000);
  }

  // 初始化翻译：遍历所有带data-i18n属性的元素，替换为当前语言文本
  function initTranslations() {
    // 处理普通文本翻译
    document.querySelectorAll("[data-i18n]").forEach(element => {
      const translationKey = element.getAttribute("data-i18n");
      // 检查当前语言是否有对应翻译
      if (translations[currentLang] && translations[currentLang][translationKey]) {
        // 支持带HTML标签的翻译（如FAQ中的链接）
        if (element.hasAttribute("data-i18n-html")) {
          element.innerHTML = translations[currentLang][translationKey];
        } else {
          element.textContent = translations[currentLang][translationKey];
        }
      }
    });

    // 初始化时同步更新构建状态翻译
    updateAllBuildStatusTranslations();
  }

  // 批量更新所有构建状态文本（语言切换时调用）
  function updateAllBuildStatusTranslations() {
    const buildStatusContainers = document.querySelectorAll(".build-status");
    if (buildStatusContainers.length > 0 && typeof updateBuildStatus === "function") {
      buildStatusContainers.forEach(container => {
        updateBuildStatus(container);
      });
    }
  }

  // 切换语言：更新当前语言并重新初始化翻译
  function changeLanguage(targetLang) {
    // 仅在语言变化时执行更新
    if (targetLang !== currentLang) {
      currentLang = targetLang;
      // 更新页面文本
      initTranslations();
      // 更新图表语言（若存在图表）
      if (typeof updateChartLanguage === "function") {
        updateChartLanguage(currentLang);
      }
      // 同步语言按钮样式（高亮当前选中语言）
      if (typeof syncLangBtnStyles === "function") {
        syncLangBtnStyles(currentLang === "zh");
      }
    }
  }

  // 同步语言按钮样式
  function syncLangBtnStyles(isZh) {
    const langEnBtn = document.getElementById('lang-en-btn');
    const langZhBtn = document.getElementById('lang-zh-btn');
    const mobileLangEnBtn = document.getElementById('mobile-lang-en-btn');
    const mobileLangZhBtn = document.getElementById('mobile-lang-zh-btn');
    const modalEnBtn = document.getElementById('modal-lang-en-btn');
    const modalZhBtn = document.getElementById('modal-lang-zh-btn');

    // 更新主语言按钮
    if (langEnBtn && langZhBtn) {
      langEnBtn.className = isZh 
        ? 'px-3 py-1 text-sm font-medium text-gray-600 hover:text-primary' 
        : 'px-3 py-1 text-sm font-medium text-primary';
      langZhBtn.className = isZh 
        ? 'px-3 py-1 text-sm font-medium text-primary' 
        : 'px-3 py-1 text-sm font-medium text-gray-600 hover:text-primary';
    }

    // 更新移动菜单语言按钮
    if (mobileLangEnBtn && mobileLangZhBtn) {
      mobileLangEnBtn.className = isZh 
        ? 'block w-full text-left px-4 py-2 text-gray-600 hover:bg-gray-100' 
        : 'block w-full text-left px-4 py-2 text-primary hover:bg-gray-100';
      mobileLangZhBtn.className = isZh 
        ? 'block w-full text-left px-4 py-2 text-primary hover:bg-gray-100' 
        : 'block w-full text-left px-4 py-2 text-gray-600 hover:bg-gray-100';
    }

    // 更新模态框语言按钮
    if (modalEnBtn && modalZhBtn) {
      modalEnBtn.className = isZh 
        ? 'px-3 py-1 text-sm font-medium text-gray-600 bg-white' 
        : 'px-3 py-1 text-sm font-medium text-primary bg-white';
      modalZhBtn.className = isZh 
        ? 'px-3 py-1 text-sm font-medium text-primary bg-white' 
        : 'px-3 py-1 text-sm font-medium text-gray-600 bg-white';
    }
  }

  // 移动端菜单控制
  function toggleMobileMenu() {
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenu.classList.toggle('hidden');
  }

  // 移动端菜单链接点击后关闭菜单
  function initMobileMenuLinks() {
    const mobileLinks = document.querySelectorAll('#mobile-menu a');
    mobileLinks.forEach(link => {
      link.addEventListener('click', () => {
        const mobileMenu = document.getElementById('mobile-menu');
        mobileMenu.classList.add('hidden'); // 点击链接后关闭菜单
      });
    });
  }

  // 地图弹窗控制
  function openMapModal() {
    const modal = document.getElementById('map-modal');
    modal.classList.remove('hidden');
    // 阻止页面滚动
    document.body.style.overflow = 'hidden';
  }

  function closeMapModal() {
    const modal = document.getElementById('map-modal');
    modal.classList.add('hidden');
    // 恢复页面滚动
    document.body.style.overflow = '';
  }

  // FAQ 切换控制
  function initFaqToggles() {
    const toggles = document.querySelectorAll('.faq-toggle');
    
    toggles.forEach(toggle => {
      toggle.addEventListener('click', () => {
        const targetId = toggle.getAttribute('data-target');
        const content = document.getElementById(targetId);
        const icon = toggle.querySelector('i');
        
        // 切换当前FAQ项
        content.classList.toggle('hidden');
        icon.classList.toggle('rotate-180');
      });
    });
  }

  // 平滑滚动
  function initSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        if (targetId === '#') return;
        
        const targetElement = document.querySelector(targetId);
        if (targetElement) {
          targetElement.scrollIntoView({
            behavior: 'smooth'
          });
        }
      });
    });
  }

  // 初始化下载按钮事件
  function initDownloadButtons() {
    const downloadButtons = document.querySelectorAll('.download-btn');
    downloadButtons.forEach(button => {
      button.addEventListener('click', function(e) {
        // 获取下载类型
        const downloadType = this.getAttribute('data-type');
        
        // 如果是地图按钮，先打开弹窗
        if (downloadType === 'maps' && (this.id === 'map-download-btn' || this.id === 'map-download-alt-btn')) {
          e.preventDefault();
          openMapModal();
          return;
        }
        
        // 更新下载计数（非地图按钮）
        updateDownloadCount(downloadType);
        
        // 显示下载提示
        showDownloadNotice();
      });
    });
  }

  // 页面滚动时导航栏样式变化
  function initNavbarScrollEffect() {
    const navbar = document.getElementById('navbar');
    window.addEventListener('scroll', () => {
      if (window.scrollY > 50) {
        navbar.classList.add('py-2', 'shadow-lg');
        navbar.classList.remove('py-4');
      } else {
        navbar.classList.add('py-4');
        navbar.classList.remove('py-2');
      }
    });
  }

  // 页面加载完成后初始化
  document.addEventListener('DOMContentLoaded', function() {
    // 检测用户语言偏好
    const userLang = navigator.language || navigator.userLanguage;
    window.currentLang = userLang.includes('zh') ? 'zh' : 'en';
    
    // 初始化翻译
    initTranslations();
    
    // 加载GitHub仓库统计信息
    fetchGitHubRepoStats();
    
    // 初始化图表
    const ctx = document.getElementById('downloadsChart');
    if (ctx) {
      window.downloadsChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Windows', 'Linux', 'Maps', 'Database'],
          datasets: [{
            label: translations[currentLang].downloadLabel,
            data: [
              downloadCounts.windows,
              downloadCounts.linux,
              downloadCounts.maps,
              downloadCounts.database
            ],
            backgroundColor: [
              'rgba(37, 99, 235, 0.7)',
              'rgba(30, 64, 175, 0.7)',
              'rgba(59, 130, 246, 0.7)',
              'rgba(96, 165, 250, 0.7)'
            ],
            borderColor: [
              'rgba(37, 99, 235, 1)',
              'rgba(30, 64, 175, 1)',
              'rgba(59, 130, 246, 1)',
              'rgba(96, 165, 250, 1)'
            ],
            borderWidth: 1
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          scales: {
            y: {
              beginAtZero: true,
              title: {
                display: true,
                text: translations[currentLang].downloadCount
              }
            }
          },
          plugins: {
            tooltip: {
              callbacks: {
                label: function(context) {
                  const value = context.raw;
                  return translations[currentLang].downloadTooltip.replace('%d', value);
                }
              }
            }
          }
        }
      });
    }

    // 初始化语言按钮事件
    document.getElementById('lang-en-btn')?.addEventListener('click', () => changeLanguage('en'));
    document.getElementById('lang-zh-btn')?.addEventListener('click', () => changeLanguage('zh'));
    document.getElementById('mobile-lang-en-btn')?.addEventListener('click', () => changeLanguage('en'));
    document.getElementById('mobile-lang-zh-btn')?.addEventListener('click', () => changeLanguage('zh'));
    document.getElementById('modal-lang-en-btn')?.addEventListener('click', () => changeLanguage('en'));
    document.getElementById('modal-lang-zh-btn')?.addEventListener('click', () => changeLanguage('zh'));

    // 初始化关闭模态框按钮
    document.getElementById('close-modal')?.addEventListener('click', closeMapModal);
    
    // 点击模态框外部关闭
    document.getElementById('map-modal')?.addEventListener('click', (e) => {
      if (e.target === document.getElementById('map-modal')) {
        closeMapModal();
      }
    });

    // 初始化导航栏滚动效果
    initNavbarScrollEffect();

    // 初始化FAQ切换
    initFaqToggles();

    // 初始化平滑滚动
    initSmoothScroll();

    // 初始化下载按钮事件
    initDownloadButtons();

    // 初始化构建状态显示
    initBuildStatusDisplays();
  });
</script>
</body>
</html>